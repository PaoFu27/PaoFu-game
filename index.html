<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>ç”œèœœè§£è°œæ¸¸æˆ Â· ç¬¬ä¸€å…³</title>
<style>
  body {
    background: url("Watercolor-Heart-Illustration.jpg") no-repeat center center fixed;
    background-size: cover;
    font-family: "Microsoft YaHei";
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    overflow: hidden;
  }

  /* ä¿¡å°å®¹å™¨ */
  #envelope-container {
    position: relative;
    width: 250px;
    height: 150px;
    cursor: pointer;
  }

  /* ä¿¡å°ä¸»ä½“ */
  #envelope {
    width: 100%;
    height: 100%;
    background: #ff69b4;
    border-radius: 10px;
    position: relative;
    z-index: 2;
    box-shadow: 0 5px 10px rgba(0,0,0,0.3);
    transition: transform 0.6s;
  }

  /* ä¿¡å°ç›–å­ */
  #envelope::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    border-left: 125px solid transparent;
    border-right: 125px solid transparent;
    border-bottom: 75px solid #ff85c1;
    transform-origin: top center;
    transition: transform 0.6s;
    z-index: 3;
  }

  /* ä¿¡å°æ™ƒåŠ¨ */
  @keyframes shake {
    0%,100%{transform: rotate(0deg);}
    25%{transform: rotate(5deg);}
    75%{transform: rotate(-5deg);}
  }
  #envelope.shake {
    animation: shake 2s infinite;
  }

  /* çº¸å¼  */
  #letter {
    display: none;
    width: 400px;
    max-width: 90%;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    padding: 40px 30px;
    text-align: center;
    position: absolute;
    top: 50%;
    transform: translateY(-50%) scale(0.5);
    opacity: 0;
    transition: all 0.6s ease;
    z-index: 1;
  }

  #letter p {
    min-height: 100px;
    font-size: 18px;
  }

  #birthday, #submitBtn {
    display: none;
    margin-top: 15px;
    padding: 10px;
    font-size: 16px;
    border-radius: 8px;
    border: 1px solid #ccc;
  }

  #submitBtn {
    background-color: #ff69b4;
    color: white;
    border: none;
    cursor: pointer;
  }
  #submitBtn:hover {
    background-color: #ff85c1;
  }

  #next {
    display: none;
    margin-top: 20px;
    font-weight: bold;
    color: #ff1493;
  }
</style>
</head>
<body>

<div id="envelope-container">
  <div id="envelope" class="shake"></div>
</div>

<div id="letter">
  <p id="text"></p>
  <input type="text" id="birthday" placeholder="è¾“å…¥ä½ çš„ç”Ÿæ—¥">
  <br>
  <button id="submitBtn">æäº¤</button>
  <p id="next">ğŸ‰ ç”Ÿæ—¥æ­£ç¡®ï¼è¿›å…¥ä¸‹ä¸€å…³ï¼</p>
</div>

<script>
const envelope = document.getElementById("envelope");
const letter = document.getElementById("letter");
const textEl = document.getElementById("text");
const birthdayInput = document.getElementById("birthday");
const submitBtn = document.getElementById("submitBtn");
const next = document.getElementById("next");

// ä¿¡å°æ–‡å­—
const message = "å¥½ä¹…ä¸è§ï¼Œä¸Šæ¬¡è§é¢æ˜¯ä»€ä¹ˆæ—¶å€™ä½ è¿˜è®°å¾—å—ï¼Ÿ\næˆ‘çš„ç”Ÿæ—¥å¿«åˆ°äº†ï¼Œä½ ä¸€å®šè¦æ¥å“¦ ğŸ‚";

// æ‰“å­—æœºæ•ˆæœ
function typeText(text, el, callback) {
  let i = 0;
  const interval = setInterval(() => {
    el.innerHTML += text.charAt(i).replace(/\n/g,"<br>");
    i++;
    if(i >= text.length) {
      clearInterval(interval);
      if(callback) callback();
    }
  }, 50);
}

// ç‚¹å‡»ä¿¡å°å±•å¼€çº¸å¼ 
envelope.addEventListener("click", () => {
  envelope.classList.remove("shake");
  envelope.style.transform = "scale(0) rotateX(90deg)";
  setTimeout(() => {
    envelope.style.display = "none";
    letter.style.display = "block";
    setTimeout(() => {
      letter.style.opacity = 1;
      letter.style.transform = "translateY(-50%) scale(1)";
      typeText(message, textEl, () => {
        birthdayInput.style.display = "inline-block";
        submitBtn.style.display = "inline-block";
      });
    }, 100);
  }, 600);
});

// æäº¤ç”Ÿæ—¥
submitBtn.addEventListener("click", () => {
  const b = birthdayInput.value.trim();
  if(b === "") {
    alert("è¯·è¾“å…¥ä½ çš„ç”Ÿæ—¥å“¦~ ğŸ‚");
    return;
  }
  next.style.display = "block";
  setTimeout(() => {
    alert("ä¸‹ä¸€å…³å†…å®¹å¯ä»¥åœ¨è¿™é‡Œæ˜¾ç¤ºæˆ–è·³è½¬é¡µé¢ï¼");
  }, 500);
});
</script>

</body>
</html>
